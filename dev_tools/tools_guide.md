## ゲーム制作用ツールガイド

ゲーム制作用に制作したツールをこのフォルダにまとめました。それぞれの概要と役割を以下に記載しています。  
音源のバイナリデータ化および暗号化の方法は[audio_tools]("./dev_tools/audio_tools/audio_conversion_guide.md")にまとめてあります。  

### ツール一覧

## 音源ツール（必須）    

1. **convert_to_binary**  
   音源ファイルをバイナリデータ形式に変換するスクリプトです。  
   まず、このツールで音源をバイナリデータに変換してください。

2. **generate_key.py**
   バイナリデータ化した音源を暗号化するための`secret.key`を作成します。

3. **encrypt_audio.py**  
   `secret.key`を使用して音源の暗号化を行います。

4. **generate_master_key.py**
   `secret.key`をさらに暗号化して`encrypted_secret.key`を作成します。
   同時に生成された、解除用の`master.key`をソースコードにハードコーディングします。

## ハードコーディングするマスターキーを難読化するツール

- **key_obfuscator.py**
  解除用の`master.key`をソースコードにハードコーディングする際に、難読化を行うスクリプトです。  
  マスターキーをコピペして実行すると3つに分解されて、あらかじめ作成された複数の変数の中からランダムに代入されます。  
  残りの変数にはランダムで作成されたダミーキーが代入されます。出力されたコードをmainスクリプトにコピペするとそのまま使えるようになっています。
  ※ランダム生成には、標準ライブラリの`secrets`ライブラリを使用しています。`random`ライブラリのような疑似乱数と違い、暗号学的に安全な乱数生成を行えます。

## ページめくりのフラグをページ最後に自動で入力するツール  

- **Flag_Input_Script.py**
  同じディレクトリににあるjsonファイルをすべて読み込んで指定したフラグを任意の場所に一度に入力するスクリプトです。  
  今回は、ページめくりの画像をすべてのjsonファイルに入力するのに使いました。

## その他ゲーム制作用に作成、使用したツール  

- **binary_audio_player.py**  
   作成したバイナリデータ形式の音源を再生し、確認するためのスクリプトです。  
   動作確認に使用しました。(使い方はコードにあります)    
   ※ 暗号化したバイナリデータ音源を再生するツールは別にあります。  
   
- **encrypted_audio_player.py**
   暗号化したバイナリデータ音源を複合化して再生、確認するためのスクリプトです。  
   動作確認に使用しました。(使い方はコードにあります)    
   また、PyInstallerでの動作確認用の対応も行っています   
   ※ 一時ファイルが残る記述です。作成された`decrypted_audio`は、必ず削除してください。  

- **file_replacer.py**  
   フォルダ内のファイル名に含まれる共通の語句を一括で置き換えるスクリプトです。  
   大量のファイル名やファイル名の一部を一度に置換できます。(使い方はコードにあります)

- **decrypt_audio.py**  
    暗号化した音源ファイルを複合化するスクリプトです。暗号化したキーがあればこのスクリプトで解除できます。  
   （`encrypted_audio_player.py`のプロトタイプ）  

- **webp_image_converter.py**
   指定したフォルダの中にある.webp形式の画像ファイルすべて読み込んで、指定の画像形式に変換して別フォルダに出力するツールです。  
   ChatGPTが出力する画像(.webp)を、使いやすい画像形式(.png)に変換するために作成しました(.jpegにもできます)  
   TkinterでGUI化してあります。  

- **json_text_extractor_v1.py**  
   jsonファイルの"text"部分のみを抜き出して.txtに出力するスクリプトです。
   v1は、起動すると同じディレクトリにあるjsonファイルをすべて読み込んで"extracted_text.txt"として一つのファイルに出力します。  
   voice作成に使用しました。  

- **json_text_extractor_v2.py**  
   jsonファイルの"text"部分のみを抜き出して.txtに出力するスクリプトです。
   v2は、起動すると同じディレクトリにあるjsonファイルをすべて読み込んで、抽出したテキストと同名のテキストファイルに出力します。  
   voice作成に使用しました。  

- **json_field_remover.py**   
   指定したjson内の項目とその内容を一度に削除できます。voiceフラグとそのパスを削除するのに使用しました。  

- **トリミングアプリ※非公開、別リポジトリで公開するかもしれません**
   既存の機械学習ライブラリを使用し、画像から人物などを自動で検出してトリミングをするアプリです。  
   王女アリアーナをトリミングして使用しているシーンがあります(画像に加工するのは普通にペイントを使いました)  


