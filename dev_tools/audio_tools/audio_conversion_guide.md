
---

# 音源変換・暗号化ガイド

---

## 1. 音源ファイルをバイナリデータ形式に変換

### **スクリプトの概要**
指定したフォルダ内の音源ファイル（`.mp3`、`.wav`、`.ogg`形式）をバイナリ形式に変換し、別のフォルダに保存します。  
`convert_to_binary.py`を使用し、音源をバイナリデータに変換してください。

---

### **フォルダ構成**
スクリプトとファイルを以下のように配置してください：

```
プロジェクトフォルダ/
├── convert_to_binary.py   # 音源をバイナリに変換するスクリプト
├── audio/                 # 音源ファイルを格納するフォルダ
│   ├── example1.mp3
│   ├── example2.wav
├── binary_audio/          # バイナリデータ保存用フォルダ（実行時に自動生成）
```

- **`audio/`** フォルダに変換対象の音源ファイルを格納してください。

---

### **実行手順**

1. **スクリプトを実行**
   ターミナルやコマンドプロンプトで、スクリプトが配置されたディレクトリに移動し、以下のコマンドを実行します：

   ```bash
   python convert_to_binary.py
   ```

2. **変換結果の確認**
   - 変換後、**`binary_audio/`** フォルダにバイナリ形式のファイル（例: `example1.mp3.bin`）が保存されます。

---

### **注意事項**

1. 対応フォーマットは `.mp3`、`.wav`、`.ogg` のみです。  
2. 対応外のファイルは無視されます。  
3. 変換後のファイル名は「元ファイル名 + `.bin`」形式になります。  

---

## 2. 暗号化用の鍵を作成

### **スクリプトの概要**
暗号化に必要な**秘密鍵（`secret.key`）**を`generate_key.py`を使用して生成します。

---

### **実行手順**

1. **スクリプトを実行**
   以下のコマンドを使用して秘密鍵を作成します：

   ```bash
   python generate_key.py.py
   ```

2. **生成結果の確認**
   - 実行後、`secret.key` がスクリプトと同じディレクトリに生成されます。

---

### **注意事項**

1. **`secret.key` は絶対に第三者に渡さないでください。**  
2. 鍵を紛失すると復号ができなくなります。必ず安全に保管してください。  
3. 実際にソースコードで使用するキーは、`secret.key`を暗号化した`encrypted_secret.key`のみです。  
   実行ファイル化など行う場合にはフォルダ内に`secret.key`を含めないようにしてください。

---

## 3. 音源ファイルを暗号化

### **スクリプトの概要**
バイナリ形式の音源ファイルを、作成した秘密鍵`secret.key`を用いて`encrypt_audio.py`で暗号化します。

---

### **フォルダ構成**
暗号化に必要なファイルを以下のように配置してください：

```
プロジェクトフォルダ/
├── secret.key             # 暗号化に必要な秘密鍵ファイル
├── binary_audio/          # 暗号化するバイナリ音源を配置
├── encrypted_audio/       # 暗号化後のファイル保存先（自動生成）
├── encrypt_audio.py       # 音源暗号化スクリプト
```

---

### **実行手順**

1. **バイナリ音源を準備**
   - 暗号化対象の音源ファイルを`binary_audio/`フォルダに配置してください。

2. **スクリプトを実行**
   - 以下のコマンドを使用して音源を暗号化します：

     ```bash
     python encrypt_audio.py
     ```

3. **暗号化結果の確認**
   - `encrypted_audio/` フォルダに、暗号化された音源ファイル（例: `example1.mp3.bin.enc`）が保存されます。

---

### **注意事項**
  
1. **暗号化前のファイルは削除またはフォルダ内に含めないように**してください。  
2. 暗号化された音源は通常のプレーヤーでは再生できません。復号が必要な場合は、`decrypt_audio.py` を使用してください。

---

### **実行後のファイル構成例**

#### 元のファイル：
```
binary_audio/
├── example1.mp3.bin
├── example2.wav.bin
```

#### 実行後の結果：
```
encrypted_audio/
├── example1.mp3.bin.enc
├── example2.wav.bin.enc
```

---

## 4. `secret.key`を暗号化
`MasterKeyObfuscation.py`を使用して`secret.key`をさらに暗号化した`encrypted_secret.key`と、その解除キー`master.key`を作成してください。  

```
プロジェクトフォルダ/
├── secret.key                   # 暗号化に使用した秘密鍵ファイル
├── master.key         　        # encrypted_secret.keyの解除キー（自動生成）
├── encrypted_secret.key         # 暗号化された秘密鍵（自動生成）
├── MasterKeyObfuscation.py      # キー暗号化スクリプト
```

 **スクリプトを実行**
   以下のコマンドを使用して`secret.key`を暗号化した`encrypted_secret.key`とそれを解除する`master.key`を作成します：

   ```bash
   python MasterKeyObfuscation.py
   ```

## 5. 解除用の`master.key`をソースコードにハードコーディング  
`key_obfuscator.py`を使用してください。スクリプト内の`MASTER_KEY`に作成したマスターキーの文字列を代入してください。

 **スクリプトを実行**
   
   ```bash
   python key_obfuscator.py
   ```
難読化が自動で行われますので出来上がったコードを`main.py`にそのまま実装(コピペ)してください。  
コピペの場所は`main.py`内のコメントアウトで記述してあります。  